# BSW-test

[![black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/ambv/black)
[![ruff](https://img.shields.io/badge/linting-ruff-261230)](https://github.com/astral-sh/ruff)
[![pre-commit](https://img.shields.io/badge/pre--commit-enabled-brightgreen?logo=pre-commit)](https://github.com/pre-commit/pre-commit)

## Общая информация

Система, принимающая пользовательские ставки на определённые события (например, спортивные).

Состоит из двух независимых сервисов:

- сервис __line-provider__ — провайдер информации о событиях,
- сервис __bet-maker__ — принимает ставки на эти события от пользователя.

Запуск проекта осуществляется через Docker.

## Описание сервиса line-provider

Сервис выдает информацию о событиях, на которые можно совершать ставки.
Принимаются ставки только на выигрыш первой команды.

Информация о событии содержит:

- уникальный идентификатор события — число,
- коэффициент ставки на выигрыш — строго положительное число с двумя
знаками после запятой,
- дедлайн для ставок — таймстемп, до которого на событие принимаются ставки,
- текущий статус события.

Событие может иметь один из трёх статусов:

- незавершённое,
- завершено выигрышем первой команды,
- завершено выигрышем второй командыи, соответственно, поражением первой
(ничьих в наших событиях не бывает).

Информация о событиях хранится в памяти.

## Описание сервиса bet-maker

Сервис отвечает за постановку ставок на события пользователями.

Информация о событиях получается из сервиса __line-provider__.

Информация о ставке содержит:

- уникальный идентификатор ставки — число,
- идентификатор события — число,
- сумма ставки — строго положительное число с двумя знаками после запятой,
- статус ставки.

Информация о ставках хранится в БД PostreSQL.

## Запуск

1. Склонировать репозиторий
2. Перейти в папку с проектом
3. Выполнить команду `docker-compose up`

- Сервис bet-maker будет доступен по адресу <http://127.0.0.1:8001/>
- Сервис line-provider будет доступен по адресу <http://127.0.0.1:8002/>

### TODO

- миграции
- логирование
- настроить хранилище для событий
- увеличить покрытие тестами
- прикрутить очередь
